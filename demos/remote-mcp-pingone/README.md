# Model Context Protocol (MCP) Server + PingOne

This is a [Model Context Protocol (MCP)](https://modelcontextprotocol.io/introduction) server that supports remote MCP connections, with PingOne built-in.

The MCP server (powered by [Cloudflare Workers](https://developers.cloudflare.com/workers/)):

- Acts as _OAuth Server_ to your MCP clients
- Acts as _OIDC Client_ to your PingOne environment

> [!WARNING]
> This is a demo template designed to help you get started quickly. While we have implemented several security controls, **you must implement all preventive and defense-in-depth security measures before deploying to production**. Please review our comprehensive security guide: [Securing MCP Servers](https://github.com/cloudflare/agents/blob/main/docs/securing-mcp-servers.md)

## Getting Started

This demo allows an MCP Server to call a protected API on behalf of the authenticated user. To get started you will need the following:

1. Deploy the [Todo API](./api/)
2. Deploy the [OIDC MCP Server](./mcp/)

## Access the remote MCP server from the Cloudflare Workers AI LLM Playground

Navigate to [https://playground.ai.cloudflare.com/](https://playground.ai.cloudflare.com/) and connect to your MCP server using the following URL pattern:

```
https://todo-mcp.<your-subdomain>.workers.dev/mcp
```

<img src="_docs/workers_ai_playground_demo.png" width="60%" alt="MCP server demo with workers ai playground">

## Access the remote MCP server from Claude Desktop

Open Claude Desktop and navigate to Settings -> Developer -> Edit Config. This opens the configuration file that controls which MCP servers Claude can access.

Replace the content with the following configuration. Once you restart Claude Desktop, a browser window will open showing your OAuth login page. Complete the authentication flow to grant Claude access to your MCP server. After you grant access, the tools will become available for you to use. 

```
{
  "mcpServers": {
    "todo-mcp": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "https://todo-mcp.<your-subdomain>.workers.dev/mcp"
      ]
    }
  }
}
```

Once the Tools (under ðŸ”¨) show up in the interface, you can ask Claude to use them. For example: "Could you use the whoAmI tool to tell me what email I have registered in PingOne?". Claude should invoke the tool and show the result generated by the MCP server.
